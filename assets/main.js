class c{constructor(e){this.wrapper=e,this.productLinks=this.wrapper.querySelectorAll("a"),this.productImages=this.wrapper.querySelectorAll("img"),this.productImage=this.productImages[0],this.buttons=this.wrapper.querySelectorAll("button"),this.duplicateImage=null,this.imageReplacementRegex=/(\.\w+)(\?|$)/,this.secondarySuffix="-secondary$1$2",this.init()}init(){this.wrapper.addEventListener("click",this.switchColor.bind(this)),!this.productImages[1]&&!this.duplicateImage&&(this.createSecondaryImage(),this.onHover())}createSecondaryImage(){this.duplicateImage=this.productImage.cloneNode(!0),this.productImage.parentNode.insertBefore(this.duplicateImage,this.productImage.nextSibling),this.updateSecondaryImage(this.productImage)}updateSecondaryImage(e){this.duplicateImage.src=e.src.replace(this.imageReplacementRegex,this.secondarySuffix),this.duplicateImage.srcset=e.srcset.split(",").map(t=>t.trim().replace(this.imageReplacementRegex,this.secondarySuffix)).join(",")}onHover(){this.wrapper.addEventListener("mouseenter",()=>{this.duplicateImage.style.opacity="1"}),this.wrapper.addEventListener("mouseleave",()=>{this.duplicateImage.style.opacity="0"})}switchColor(e){const t=e.target.closest("button[data-variant-id][data-variant-image]");if(!t)return;const{variantId:a,variantImage:r}=t.dataset;this.updateProductLink(a),this.updateProductImage(r),this.buttons.forEach(i=>{i.classList.contains("border-black")&&(i.classList.remove("border-black"),i.classList.add("border-[#E8E8E8]"))}),t.classList.remove("border-[#E8E8E8]"),t.classList.add("border-black")}updateProductLink(e){var t;(t=this.productLinks)==null||t.forEach(a=>{const r=a.href.split("?")[0];a.href=`${r}?variant=${e}`})}updateProductImage(e){if(!e)return;const t=(a,r)=>{a&&(a.src=r,a.srcset=`${r} 326w, ${r}&width=165 165w`)};t(this.productImage,e),t(this.duplicateImage,e.replace(this.imageReplacementRegex,this.secondarySuffix))}}document.querySelectorAll(".card-wrapper").forEach(s=>{try{new c(s)}catch(e){console.error("CardWrapper initialization failed:",e)}});
